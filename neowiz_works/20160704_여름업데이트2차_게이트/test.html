<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ko">
<head>
<title>피망 - 대한민국 No.1 게임포털 피망!</title>
<meta http-equiv="X-UA-Compatible" content="IE=Edge;" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="css/test.css">
<script src="http://www.pmang.com/global/javascript/jq/jquery-1.8.3.min.js"></script>
<script src="http://file.pmang.kr/js/lib/require.nwz.min.js"></script>
<script type="text/javascript" src="http://mm.pmang.com/pmang/ava/event/2016/0704/js/event.js"></script>
</head>
<body>
<section id="s1" class="col"></section>
<section id="s2" class="row"></section>
<section id="s3" class="col"></section>
<section id="s4" class="row"></section>
<section id="s5" class="col"></section>
<section id="s6" class="col"></section>
<section id="s7" class="col"></section>
<!--[if gt ie 8]><!-->
<script>
require.config({
	paths: {
		TweenMax: 'http://mm.pmang.com/pmang/ava/event/2016/0622/js/TweenMax.min',
		TimelineMax: 'http://mm.pmang.com/pmang/ava/event/2016/0622/js/TweenMax.min',
		ScrollMagic: 'http://mm.pmang.com/pmang/ava/event/2016/0622/js/ScrollMagic.min',
		ScrollToPlugin: 'http://mm.pmang.com/pmang/ava/event/2016/0622/js/plugins/ScrollToPlugin.min',
		"animation.gsap": 'http://mm.pmang.com/pmang/ava/event/2016/0622/js/plugins/animation.gsap.min',
		"ScrollMagic.debug": 'http://mm.pmang.com/pmang/ava/event/2016/0622/js/plugins/debug.addIndicators.min'
	}
});
require(['ScrollMagic', 'TweenMax', 'TimelineMax', 'ScrollToPlugin', 'animation.gsap', 'ScrollMagic.debug'], function (ScrollMagic, TweenMax, TimelineMax) {

	

	if (!$('html').hasClass('old-man')) {
		

		function scrollHandler(direction){
			
			var	scrollTime = 2, //sec
				scrollDistance = 300,
				$window = $(window);

			
			$window.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll", function(event){
				event.preventDefault();	
				var delta = event.originalEvent.wheelDelta/120 || -event.originalEvent.detail/3,
					scrolldir = direction ? $window.scrollLeft():$window.scrollTop(),
					finalScroll = scrolldir - parseInt(delta*scrollDistance);
				if(direction){
					TweenMax.to($window, scrollTime, {
					scrollTo : { x: finalScroll, autoKill:true },
						ease:  Expo.easeOut,
						autoKill: true,
						overwrite: 5							
					});
				}else{
					TweenMax.to($window, scrollTime, {
					scrollTo : { y: finalScroll, autoKill:true },
						ease:  Expo.easeOut,
						autoKill: true,
						overwrite: 5							
					});

				}
				

				
					
			});
		}
		scrollHandler();
		// init controller
		var vController = new ScrollMagic.Controller();
		var hController = new ScrollMagic.Controller({vertical: false});

		new ScrollMagic.Scene({triggerElement: "#s1", duration: $(window).height(), offset: 0})
			.triggerHook(0)
			.setTween()
			.addIndicators({name: "r1"})
			.addTo(vController);

		new ScrollMagic.Scene({triggerElement: "#s2", duration: $(window).height()})
			.triggerHook(0)
			.setPin("#s2")
			.addIndicators({name: "hhhhhhhhhhhh start"})
			.on("enter", function (event) {
				scrollHandler(true) //scroll direction change
			})
			.on("end", function (event) {
				scrollHandler(true) //scroll direction change
			})
			.addTo(vController);

		new ScrollMagic.Scene({triggerElement: "#s2", duration: $(window).width()*2.5})
			.triggerHook(.5)
			.addIndicators({name: "s2 vvvvvvvvvvvvvvvv"})
			.on("end", function (event) {
				scrollHandler() 
			})
			.addTo(hController);

		// new ScrollMagic.Scene({triggerElement: "#ev_01", duration: "50%"})
		// 	.triggerHook(.5)
		// 	.setTween(ev01Tls)
		// 	//.addIndicators({name: "ev01ttttttttttttttt"})
		// 	.addTo(controller)
		// new ScrollMagic.Scene({triggerElement: "#ev_01", duration: "300%"})
		// 	.triggerHook(0)
		// 	.setPin("#ev_01")
		// 	.setTween(ev01Tl)
		// 	//.addIndicators({name: "ev01"})
		// 	.on("progress", function (event) {
		// 		TweenMax.to($progress, 1, {width: event.progress*100+"%"})
		// 	})
		// 	.addTo(controller);
		// new ScrollMagic.Scene({triggerElement: "#ev_02", duration: 700})
		// 	.setTween(ev02Tl)
		// 	.addTo(controller)

					
		

	window.scrollTo(0, 0);
	}
});
</script>
<!--<![endif]-->
</body>
</html>
